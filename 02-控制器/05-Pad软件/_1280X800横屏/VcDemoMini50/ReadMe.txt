
VcDemoMini01
20160613
1.是VCDemo的裁剪版。。。
2.裁剪的只剩下截图，录制的功能。

VcDemoMini02
20160613
1.是VCDemo的裁剪版。。。
2.裁剪的剩下截图，录制，退出，设置路径。

VcDemoMini03
20160614
1.是VcDemoMini02的修改版
2.添加背景图，改变尺寸和位置等
3.成功的计算出了MFC尺寸单位和Pad像素比位1：2

VcDemoMini04
20160614
1.本版本测试CButtonSt
2.CButtonST测试成功

VcDemoMini05
20160614
1.VcDemoMini04的修改版
2.重点添加MFC定时器和录制边框,添加成功。
3.使用定时器在录制边框绘制矩形的方式添加。
4.到此为止，界面基本完成。

VcDemoMini06
20160616
1.VcDemoMini05的修改版
2.新添拍照快门声，使用多进程，添加成功。
3.新添设置保存路径按钮和打开保存路径按钮。

VcDemoMini07
20160616
1.VcDemoMini06的修改版
2.重点添加串口功能,已经添加，并且测试接收，但是没有按照协议的发送接收等。

VcDemoMini08
20160617
1.VcDemoMini07的修改版
2.重点调试串口按协议接收发送以及和采集卡一起使用的情况.
3.实现按协议发送和接收串口数据，并且实现串口控制拍照功能。
4.发送串口数据采用定时器发送。

VcDemoMini09
20160619
1.VcDemoMini08的修改版
2.修改了功能按钮的尺寸，添加了4个电量的显示。
3.至于打算按既定的协议完成程序，由于测试程序比较难写，而且协议修改不是什么大问题，所以暂时不改。
4.中间出了一点问题，退出时异常，导致下次进入程序时有问题，分析原因是因为串口的问题，有可能是没有打开却使用了，也有可能打开了没有关闭等。
5.还有一个问题：之前使用Pad端作为被动接收，而且接收编辑框一直没有清空，会导致取景卡顿严重，后来改成Pad主动发送，单片机被动接收，并且接收编辑框定期清空，问题解决了。

VcDemoMini10
20160620
1.修改关于对话框，以及设置对话框。
2.采用联合体作为接收数据帧。出现了数据紊乱的情况，估计是因为没有对数据的帧头进行校验，也没有对数据帧奇偶校gai验。
3.该版本在Pad上同时测试过采集卡和串口，并实现了串口的拍照和录像。之前所说的在Pad上无法同时测试是因为使用Hab后会自动重装采集卡驱动，其实没关系，让他重装，然后可以使用，是没问题的。测试效果良好。不过测试的还是随意的协议。

VcDemoMini11
20160620
1.基本上和VcDemoMini10差不多，
2.实现了数据帧头的校验，保证了数据不会G帧，奇偶校验失败，分析是数据转换时的问题，可以解决。
3.发布到Pad上，效果很好，虽然没有奇偶检验，但是也是运行正常的。
4.该版本是CRAB发布的v1.0.

VcDemoMini12
20160621 
20160622
1.采集卡掉线后，重新连接处理，当断开连接后可以拔出usb，连接usb以后可以重新连接设备。
2.Pad充电判断，如果正在充电，预览区显示正在充电。采用MFC加载GIF动态图。
3.如果没有连接采集卡，拍照录像失能。
4.所有的系统资源比如定时器，串口，采集卡，都放在最后开启，如果事先开启，会发生内存泄露。
5.m_PrvHwnd不知道干嘛用,暂时隐藏该窗口

VcDemoMini13
20160623
1.解决串口关闭和重新打开的问题，串口的使用必须做到开闭可控否则会出现资源拒绝访问的问题，容易出现程序卡死等。
2.关闭串口时：通过提前通知软件即：控制器发送关闭指令->Pad收到指令后，关闭串口和采集卡，回复控制器已经关闭->控制器切断资源。
3.重新连接时：由于切断资源后，Pad会处于充电状态。
	if( 如果Pad处于未充电状态，而且资源没有连接成功)
	{
		定时1s初始化资源(串口，采集卡)
		标记资源连接成功
	}
4.在没有协议的情况下，先使用按钮模拟。
5.在按钮模拟的情况下基本可以实现。但是重新连接设备时Pad需要比较长的时间识别驱动。而且对设备可靠连接有比较高的要求。

VcDemoMini14
20160624
1.按照既定的协议完善程序。。。
2.增加接收数据和校验，验证成功。
2.增加OnDeviceChange串口检测消息。

VcDemoMini15
20160624
1.按照既定的协议完善程序。。。
2.增加接收数据和校验，验证成功。
3.增加OnDeviceChange串口检测消息。
4.VcDemoMini14的过渡版本，防止协议改变的会改变其他的内容。。。
5.OnDeviceChange的使用实现了设备重新连接。测试结果很好。
	同时还有一个好的发现，即便是无法通信，但是只要串口和采集卡连接上
	就不影响拍照和录制的功能
6.修改协议后，参照协议：《CRAB系统通讯协议集20160623》表现很好，可以作为发布的V1.1版。

VcDemoMini16
20160625
1.新增电池电压与电量转化函数,测试良好。

VcDemoMini17
20160627
1.电量显示使用picture控件,添加完成，使用5格电量。
2.完成了初始路径的设置：总目录->日期->图像，视频->文件再按日期保存。
3.设置路径成功后，不知道为什么不能录像了，很奇怪。。。

VcDemoMini18
20160628
1.电量显示使用picture控件,添加完成，使用5格电量。
2.完成了初始路径的设置：总目录->日期->图像，视频->文件再按日期保存。
3.设置路径成功后，不知道为什么不能录像了，现已解决了。

VcDemoMini19
20160628
1.修改界面。。。
2.添加了资源加载界面。对于何时显示什么，这里有比较复杂的逻辑关系。
3.残留问题：加载资源界面和充电显示的逻辑关系是不是最好的，
	在采集卡和串口断开与重启时的显示是否正常合理。

VcDemoMini20
20160629
1.修改关机准备好协议。
2.增加登录信息保存功能，测试良好，不过应该先设置路径，不然会保存在最近的设置路径里。
3.该版本删掉了设置对话框的一些无用代码。
4.关于保存路径的命名，建议精确到天就好。
5.完成Txt文件的路径设置，放在根目录，同时将日期目录设置为1天为单位。

VcDemoMini21
20160630
1.添加REC图标。。。
2.好像做不到，因为预览区总是最前面的，。。。

VcDemoMini22
20160711
1.改变视屏预览区域大小,并且将一些尺寸改为宏定义，方便修改。

VcDemoMini23
20160713
1.再次测试串口抛出异常的问题。。。

VcDemoMini24
20160713
1.
2.集中初始化部件尺寸和位置以及显示状态。

VcDemoMini25
20160714
1.整合文本编辑器功能，整合成功。
2.发现构造函数和OnInitDialog有比较大的区别，比如SetWindowText()只能放在OnInitDialog()中，而不能放在构造函数中。

VcDemoMini26
20160714
1.整合图片浏览器功能, 整合完成。
2.重申一次，list2Index=0;//必须在重装list2后，清零list2Index，否则会记住上一个列表框的值

VcDemoMini27
20160714 am
1.整合视频回放功能,整合完成。效果良好。

VcDemoMini28
20160714 pm
1.文本查看，图片浏览，视频回放，功能整合后，进行界面完善,基本完善。测试结果良好。

VcDemoMini29
20160718 pm
1.从VcDemoMini29版本以后开始为1280x800的横屏程序。
2.完善了移动窗体会改变窗体尺寸的问题。	
3.基本功能移植成功。不过电量显示好像有点bug

VcDemoMini30
20160719
1.继续修改完善。。。
2.增加列表框字体设置。
3.基本完成。作为发布CRAB V2.0
4.完善播放器播放死机的问题。大大改善了死机的概率，不过还是会有。

VcDemoMini31
20160721
1.增加OSD功能,添加成功。

VcDemoMini32
20160725
1.修改BtnSt源码，修改按下显示边框的问题。在函数DrawItem中修改。
2.去除视频预览区的边框。
3.基本完成CRAB v3.0的界面框架搭建，但是还没有添加相应的类，比如罗盘等。

VcDemoMini33
20160725
1.添加速度，工作模式，红外开关等指示Picture。
2.添加方向罗盘显示，使用GDI绘制扇形。

VcDemoMini34
20160725
1.使用3DS文件显示方向罗盘,加载完成。

VcDemoMini35
20160726
1.完善程序运行时间长以后死机的问题。。。
2.主要的问题是GDI资源泄露问题,通过使用boundsChecker白盒测试，大概就是定时器里的HBITMAP的问题。
3.但是通过boundsChecker白盒测试C3DSShow类时，会发生栈溢出，原因不详。
4.改变了C3DSShow类的显示部件的尺寸，在pad上出现了闪屏的问题。

VcDemoMini36
20160727
1.升级C3DSShow类，使之接收鼠标事件。发布CRAB v3.0

VcDemoMini37
20160727
1.再次优化串口热插拔问题。在WriteChar()和ReceiveChar()内部还可以添加异常抛出，可以解决热插拔弹窗的问题。
2.问题：虽然可以解决弹窗的问题，但是一旦出现热插拔窗口，就无法彻底的关闭软件，关闭后的软件会留在后台运行。
	积累多了，会占据CUP和内存。
3.在OnButtonExit()里添加下面代码，强制关闭进程，可以解决问题2.
	HANDLE hself = GetCurrentProcess();
	TerminateProcess(hself, 0);
4.该版本已经被VS2013移植成功了。

VcDemoMini38
20160729
1.解决CRAB一些遗留的问题。。。
2.中间出现了窗口工作一段时间后就停止了，原因是在WriteChar()里错误的抛出了异常，导致串口关闭。
3.添加串口调试开关：PORT_DEBUG；关闭正在充电判断；只保留3DS文件的一个自由度；将文件保存于D盘,因此也修改了视频,图片,文本查看的相对路径。
4.增加根据盘符的数量来决定数据的存储路径。
4.基本完成以上要点。

VcDemoMini39
20160801
1.重点解决vlc播放器首次播放有异常的问题.
2.问题描述：VLC播放器首次运行时，总是会播放文件失败，而且跳出异常。首次是指从电脑开机开始。当然这种问题只在win10 pad上发现。
	所以该问题是属于兼容性的问题。
3，解决方案：
	1.最简单的方法是修改软件的兼容性，直接右键软件选择兼容性即可，但是失败。
	2.通过实验可知，只要在同一路径下的vlc软件运行过一次，然后就可以正常播放了。这里需要注意的是“同一路径”，也就是一定要是在同一目录下的vlc播放器
		，可以是不同的软件。实验还发现，官网的vlc.exe首次运行播放，不会出现播放失败，这也说明了vlc播放器应该是有一些初始化操作的，但是我的vlc播放器
		里面没有相应的初始化，而且目前也无法得知如何初始化。所以得出了一个曲线救国的方法：在开机的时候，后台运行一下官方的vlc.exe软件，所以现在需要
		解决的技术问题就是：1.如何开机后台运行一个软件；2.如何通过编程的方式后台运行和关闭一个外部的exe文件；
	3.通过修改注册表可以修改开机启动项：参考文献：百度搜索即可。但是无法做到后台运行，原因不详。
	4.通过相关的函数比如：ShellExecuteEx()可以实现后台运行外部exe，然后通过TerminateProcess()关闭刚刚打开的exe,不幸的是在win10 pad上并不能实现后台运行。
	5.根据4的研究发现，现在需要解决强制将vlc.exe隐藏，然而还是失败。最终，通过设置CRAB界面总是最前面实现了隐藏vlc.exe。效果勉强OK。

4.在PAD上测试成功。

VcDemoMini40
20160803
1.根据《CRAB系统通讯协议集20160802.xlsx》实现功能。。。
2.所有CButtonST添加图标2，并且通过控制移动鼠标的位置来避免界面显示的问题。
3.根据协议，基本界面规划完成。

VcDemoMini41
20160804
1.根据《CRAB系统通讯协议集20160802.xlsx》实现功能。。。
2.基本完成协议才编程。

VcDemoMini42_2
20160809
1.在41版本上进行测试，修缮。。。
2.解决列表框不会自动添加垂直滚动。
3.该版本测试了蓝牙通讯，因为更改了蓝牙方案代替Hub串口，但是出现了一些问题：
	采集卡和蓝牙同时使用时出现了发送数据帧1000帧以内，串口就挂了，于是改变通信应答方式：PAD从动接收，收到即发。
	这样一来，问题似乎可以解决，原因不详。

VcDemoMini43
20160815
1.完善细节。。。
2.添加图片浏览NextBtn图标.
3.不知道为什ON_WM_DEVICECHANGE()突然不见了，估计前面的版本也不见了，不过可以手动添加。
4.本版本修改的比较乱。。。

VcDemoMini44
20160816
1.针对上位机作为从动接收数据时，串口资源不能够完全释放的问题进行专题解决，
	而，当上位机作为主动发送数据时，可以通过简单的m_SerialPort.ClosePort();实现关闭串口并释放资源。
2.解决方案：
	1.将m_SerialPort对象作为指针，并且在关闭串口时，回收对象，测试失败。
	2.将原来的复原，按钮测试通过，那也就意味着之前做过的串口类抛出异常可能都失效了。

VcDemoMini45
20160816
1.测试关机重启，测试OK。
2.使用蓝牙方案后一些变化：
	1.蓝牙开关动作不会触发ON_WM_DEVICECHANGE事件，因为在设备管理器中的com号并不会增减，
		但是后来发现采集卡的开关动作会引起设备管理器资源的增减，所以应该是可以触发ON_WM_DEVICECHANGE事件的。
	2.因为蓝牙一旦连接过，设备管理器会记住这个设备，所以使用串口初始化的时候是可以找到相应的com号，
		但是又不能真正的初始化成功，使用蓝牙时，初始化过程会占据很大的系统资源，从而导致整个软件运行卡顿等。
		所以解决方法就是不能一直给蓝牙串口初始化，这里采用：采集初始化成功后才给串口初始化，因为采集卡初始化不会
		占用太多系统资源，同时只要采集卡初始化成功后，蓝牙串口就一定可以初始化成功。

VcDemoMini46
20160818
1.添加软件启动画面,当然还是又宏控制可裁剪的功能。测试成功。

VcDemoMini47
20160818
1.软件功能左一些裁剪：不使用罗盘显示，不改变通道，添加蓝牙连接 指示。
1.基本修改完毕。
3.修复打开非视频文件异常死机的问题。其实就是当读取到非视频文件时，获取的视频时长是0.

VcDemoMini48
20160819
1.修复：录制视频时，控制器以外关机或PAD断开与控制的连接时，会录制失败，而且不能停止录制。
2.解决方案:在关机前先判断是否在录制，然后保存，最后关机。成功解决。

VcDemoMini49
20160822
1.修复：行车画面到观测画面切换时，出现字符重叠的情况。。

VcDemoMini50
20160825
1.软件显示功能裁剪，裁剪本体电量信息，自动/手动模式切换.
